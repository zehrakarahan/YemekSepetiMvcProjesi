!function(a){a.pGift=function(b){function d(){a("#giftForm").length&&f(),a("body").on("change","input[name=delivery]",function(a){e()}),e(),a("body").on("click","#gift-print-btn",function(a){var b="giftIframe",c=document.frames?document.frames[b]:document.getElementById(b),d=c.contentWindow||c;c.focus(),d.print()})}function e(){var b=a("input[name=delivery]:checked").val();"sender"==b?(a("#recipient_email_wrap").hide(),a("#sender_email_wrap").show()):(a("#recipient_email_wrap").show(),a("#sender_email_wrap").hide())}function f(){jQuery("#giftForm").validate({submitHandler:function(b){var c=h(b);jQuery.ajax({url:jQuery(b).data("submitUrl"),data:c,beforeSend:function(){a("#loadingModal").modal("show"),a(".modal-backdrop.in").remove(),jQuery("#submit_error").hide(),a(b).find("label.error").remove()},complete:function(){},error:function(b){a("#loadingModal").modal("hide"),jQuery("#submit_error").html("Some required information is missing or incomplete. Please correct your entries and try again."),jQuery("#submit_error").show()},success:function(b){b.success?void 0!=b.redirectUrl&&(window.location.href=b.redirectUrl):(a("#loadingModal").modal("hide"),g(b.error))}})},rules:{amount:{required:!0,number:!0,min:10},recipient_name:{required:!0},recipient_email:{required:!0,email:!0},sender_name:{required:!0},sender_email:{required:!0,email:!0}},messages:{amount:{min:"Amount must be greater than $10"}},errorPlacement:function(b,c){a.inArray(a(c).attr("name"),["amount"])>=0?b.insertAfter(c.closest(".input-group")):c.parent().append(b)}})}function g(b){if(a(".step-body div.error-step").remove(),"string"===jQuery.type(b))jQuery("#submit_error").html(b),jQuery("#submit_error").show();else if("array"===jQuery.type(b)){var c=!1;if(a.each(b,function(d,e){"amount"==e.field&&(a("#amount").addClass("error"),a('<label id="amount-error" class="error" for="amount">'+e.issue+"</label>").insertAfter(a("#amount").closest(".input-group")),delete b[d],k("#step-amount"),c=!0)}),0==c){var d="<ul>";a.each(b,function(a,b){d+="<li>- "+b.issue+"</li>"}),d+="</ul>",jQuery("#submit_error").html(d).show(),k("#step-submit")}}}function h(b){var c={};return a.each(a(b).serializeArray(),function(d,e){var f=e.name.search(/\[*\]$/)>=0?e.name.replace(/\[/g,"\\[").replace(/\]/g,"\\]"):e.name;if(e.name.search(/\[\]$/)>=0){var g=a(b).find("*[name="+f+"]"),h=a(g).attr("type");!a(g).is("input")||"radio"!=h&&"checkbox"!=h?c[e.name]=getMultiValue("*[name="+f+"]"):c[e.name]=getMultiValue("*[name="+f+"]:checked")}else c[e.name]=e.value}),c}function k(b){a("html,body").animate({scrollTop:a(b).offset().top},"slow")}var c={keyword:"#keywords"},b=a.extend(c,b);return{init:d}}}(jQuery),$(document).ready(function(a){$.pGift().init()});