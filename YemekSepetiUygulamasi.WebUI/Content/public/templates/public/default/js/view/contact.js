!function(u){u.Contact=function(e){var l,s;e=u.extend({keyword:"#keywords"},e),u(e.keyword);jQuery("#form-contact").validate({submitHandler:function(r){jQuery.ajax({url:jQuery(r).data("saveUrl"),data:function(n){var l={};return u.each(u(n).serializeArray(),function(e,r){var o=0<=r.name.search(/\[*\]$/)?r.name.replace(/\[/g,"\\[").replace(/\]/g,"\\]"):r.name;if(0<=r.name.search(/\[\]$/)){var t=u(n).find("*[name="+o+"]"),a=u(t).attr("type");!u(t).is("input")||"radio"!=a&&"checkbox"!=a?l[r.name]=getMultiValue("*[name="+o+"]"):l[r.name]=getMultiValue("*[name="+o+"]:checked")}else l[r.name]=r.value}),l}(r),beforeSend:function(){jQuery(".ajax-loader-stick").toggle(),jQuery(r).find("input:text,textarea").attr("readonly",!0),jQuery(r).find("button[type=submit]").attr("disabled","disabled")},complete:function(){jQuery(".ajax-loader-stick").toggle(),jQuery(r).find("input:text,textarea").attr("readonly",!1),jQuery(r).find("button[type=submit]").removeAttr("disabled")},error:function(e){console.log(e),function(e){u("#modal-error").length&&u("#modal-error").remove();var r='<div id="modal-error" class="modal red-modal fade" tabindex="-1" style="display: none;"><div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>   <div class="modal-title">Error</div> </div> <div class="modal-body">   <p>'+(e=null!=e&&""!=e?e:"Opp! Something went wrong. Please try again.")+"</p> </div>\t</div>";u("body").append(r),u("#modal-error").modal()}()},success:function(e){e.success?(jQuery("#contactSuccess").show(),jQuery("#contactError").hide(),jQuery(r).find("#fullname,#email,#phone,#message,#code").val(""),u(r).remove(),jQuery("#contactSuccess").position().top-80<jQuery(window).scrollTop()&&jQuery("html, body").animate({scrollTop:jQuery("#contactSuccess").offset().top-80},300),jQuery(r).find("label.error").remove(),""!=e.captcha&&jQuery(r).find(".refresh_code").html(e.captcha)):(jQuery("#contactError").show(),jQuery("#contactSuccess").hide(),jQuery("html, body").animate({scrollTop:jQuery("#contactError").offset().top-80},300),e.errors.csrf&&jQuery("#contactError").html(e.errors.csrf),e.errors.email&&jQuery("#email").parent().append('<label for="email" class="error" style="">'+e.errors.email+"</label>"),e.errors.phone&&jQuery("#phone").parent().append('<label for="phone" class="error" style="">'+e.errors.phone+"</label>"),e.errors.fullname&&jQuery("#fullname").parent().append('<label for="fullname" class="error" style="">'+e.errors.fullname+"</label>"),e.errors.subject&&jQuery("#subject").parent().append('<label for="subject" class="error" style="">'+e.errors.subject+"</label>"),e.errors.message&&jQuery("#message").parent().append('<label for="message" class="error" style="">'+e.errors.message+"</label>"),e.errors.code&&jQuery("#code").parent().append('<label for="code" class="error" style="">'+e.errors.code+"</label>"))}})},rules:{fullname:{required:!0},email:{required:!0,email:!0},phone:{required:!0},subject:{required:!0},message:{required:!0},code:{required:!0,maxlength:4}}}),u("#map_canvas").length&&(l=u("#map_canvas").data(),google.maps.event.addDomListener(window,"load",function(e){var r={lat:l.lat,lng:l.lng};s=new google.maps.Map(document.getElementById("map_canvas"),{zoom:13,center:r,scrollwheel:!0,mapTypeId:google.maps.MapTypeId.ROADMAP,panControl:!0,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE,position:google.maps.ControlPosition.RIGHT_CENTER}});var o=new google.maps.Marker({position:r,map:s,title:l.title});if(l.delivery){var a=new google.maps.LatLngBounds;if(u(deliveryZones).each(function(e,r){var o=null;if("shape"==r.type){o=function(e){return new google.maps.Polygon({strokeColor:e.color,strokeOpacity:.4,strokeWeight:3,fillColor:e.color,fillOpacity:.1,map:s,editable:!1,paths:function(e){var o=[];return u.each(e.split("|"),function(e,r){o.push(d(r))}),o}(e.path)})}(r);for(var t=0;t<o.getPath().getLength();t++)a.extend(o.getPath().getAt(t))}else"circle"==r.type&&(o=function(e){return new google.maps.Circle({strokeColor:e.color,strokeOpacity:.4,strokeWeight:3,fillColor:e.color,fillOpacity:.1,map:s,center:d(e.center),editable:!1,radius:parseFloat(e.radius)})}(r),a.extend(o.getBounds().getNorthEast()),a.extend(o.getBounds().getSouthWest()));"zip"!=r.type&&(u("body").on("mouseenter","#zone-item-"+e,function(e){o.setOptions(i)}),u("body").on("mouseleave","#zone-item-"+e,function(e){o.setOptions(c)}))}),!a.isEmpty()){s.fitBounds(a);var t=google.maps.event.addListener(s,"idle",function(){google.maps.event.removeListener(t)})}}var n='<div jstcache="2"> <div><strong>'+l.title+'</strong> </div> <div style="max-width: 150px;"> '+l.address+'</div> </div><div class="view-link"> <a target="_blank" href="'+l.link+'"> <span> View on Google Maps </span> </a> </div>';new google.maps.InfoWindow({content:n}).open(s,o)}));var i={strokeWeight:5,strokeOpacity:.6,fillOpacity:.3,zIndex:10},c={strokeWeight:3,strokeOpacity:.4,fillOpacity:.1,zIndex:1};function d(e){var r=e.split(",");return{lat:parseFloat(r[0]),lng:parseFloat(r[1])}}}}(jQuery),$(document).ready(function(e){$.Contact()});